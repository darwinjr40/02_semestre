unit Form;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ExtCtrls, System.ImageList,
  Vcl.ImgList;

type
Direcciones = Record
    izquierda : bool;
    derecha : bool;
    superior : bool;
    inferior : bool;
 End;

  TForm1 = class(TForm)
    TimerHelicoptero: TTimer;
    Helicoptero: TImageList;       //TPNGImage
    procedure FormCreate(Sender: TObject);
    procedure FormPaint(Sender: TObject);
    procedure TimerHelicopteroTimer(Sender: TObject);
    procedure FormKeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
    procedure FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);

  private
    { Private declarations }
  public
    { Public declarations }
    procedure HelicopterAnimacion;
  end;

var
  Form1: TForm1;
  imgH:integer;
  x, y : integer;
  Direccion : Direcciones;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  Form1.Width := Screen.Width;
  imgH := 0;
  x := 0;
  y := 0;
  Direccion.izquierda := false;
  Direccion.superior := false;
  Direccion.derecha := false;
  Direccion.inferior := false;
//  Helicoptero.Add()
end;

procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  case key of
   27:  Form1.Close;   //cerrar pestaña

   37:  begin  //izquierda
          Direccion.izquierda := true;
        end;

   38:  begin  //superior
          Direccion.superior := true;
        end;

   39:  begin  //derecha

           Direccion.derecha := true;
        end;


   40:  begin  //inferior
          Direccion.inferior := true;
        end;


   32:  begin  //espacio

        end;

 end;
end;

procedure TForm1.FormKeyUp(Sender: TObject; var Key: Word; Shift: TShiftState);
begin
   case key of
   27:  Form1.Close;   //cerrar pestaña

   37:  begin  //izquierda
          Direccion.izquierda := false;
        end;

   38:  begin  //superior
          Direccion.superior := false;
        end;

   39:  begin  //derecha
           Direccion.derecha := false;
        end;


   40:  begin  //inferior
          Direccion.inferior := false;
        end;


   32:  begin  //espacio

        end;

 end;
end;

procedure TForm1.FormPaint(Sender: TObject);

begin
  Helicoptero.Draw(Canvas,x,y,imgH); //0.1.2
end;

procedure TForm1.HelicopterAnimacion;
begin
   Repaint;
  imgh := (imgh+1) mod 3;
  //movimiento
  if (Direccion.izquierda)and(x > 0) then
    dec(x);
  if (Direccion.derecha) then
    inc(x);
  if (Direccion.superior) and (y > 0) then
    dec(y);
  if (Direccion.inferior) then  inc(y);
end;

procedure TForm1.TimerHelicopteroTimer(Sender: TObject);
begin
 HelicopterAnimacion;
end;

end.
