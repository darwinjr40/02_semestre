unit Model;

interface
  uses Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs,JPEG, ExtCtrls, pngimage,
  URecord;
  Type
    Modelo =  class abstract
//        var1: type, var2: type, ...
//        procedure method_1; abstract;
//        function method_2(); return-type;
    protected
      imageWidth, imageHeight, f, c : word;
      image : TJPegImage;
      image1 : TPNGImage;
      url : String;
      dir : Direction;
    public
      constructor Crear(); //virtual ;abstract;
      procedure Dibujar(t:TCanvas);  virtual ;//abstract;
      procedure SetFil(f :word);
      procedure SetCol(c :word);
      procedure SetFilCol(f, c : word);
      procedure SetNextPos(Nfil, Ncol : word);
      function GetFil():word;
      function GetCOl():word;

  end;
implementation

{ Modelo }

constructor Modelo.Crear;
begin
  Self.imageWidth := 50;
  Self.imageHeight := 50;
  self.url := 'prueba.png';
  Self.SetFilCol(0,0);
//  Self.image := TJPegImage.Create;
//  Self.image.LoadFromFile(Self.url);
  Self.image1 := TPNGImage.Create();
  Self.image1.LoadFromFile(self.url);
  dir := Direction.derecha;
end;

//imageWidth = col
//imageHeight = fil
procedure Modelo.Dibujar(t: TCanvas);
begin
//    t.StretchDraw(RECT(v1.x+x, v1.y+y, 20, 20), enemigoTBit);
//    t.Draw(v1.x+x, v1.y+y, enemigoTBit);
//    t.Draw(c*imageWidth, f*imageHeight, Self.image1);
  t.StretchDraw(RECT(c*imageWidth, f*imageHeight, imageWidth, imageHeight), Self.image1);
end;

function Modelo.GetCOl: word;
begin
  Result := Self.c;
end;

function Modelo.GetFil: word;
begin
  Result := Self.f;
end;

procedure Modelo.SetCol(c: word);
begin
  Self.c := c;
end;

procedure Modelo.SetFil(f: word);
begin
  Self.f := f;
end;

procedure Modelo.SetFilCol(f, c: word);
begin
  Self.f := f;
  Self.c := c;
end;

procedure Modelo.SetNextPos(Nfil, Ncol : word);
begin
  if dir = Direction.inferior then
    Self.f := (f+1) mod NFil
  else if dir = Direction.izquierda then
    self.c := (c-1+NCol) mod NCol
  else if dir = Direction.superior then
    self.f := (f-1+NFil) mod NFil
  else if dir = Direction.derecha then
    self.c := (c+1) mod NCol;
end;

end.
